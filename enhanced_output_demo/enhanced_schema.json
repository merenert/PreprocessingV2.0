{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Enhanced Address Normalization Result",
  "type": "object",
  "properties": {
    "normalized_address": {
      "type": "string",
      "description": "Final normalized address string"
    },
    "extracted_fields": {
      "type": "object",
      "description": "Extracted address components",
      "properties": {
        "il": {
          "type": "string"
        },
        "ilce": {
          "type": "string"
        },
        "mahalle": {
          "type": "string"
        },
        "sokak": {
          "type": "string"
        },
        "bina_no": {
          "type": "string"
        },
        "daire_no": {
          "type": "string"
        },
        "posta_kodu": {
          "type": "string"
        }
      }
    },
    "explanation": {
      "type": "object",
      "properties": {
        "raw": {
          "type": "string"
        },
        "parsed": {
          "type": "object"
        },
        "processing_steps": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "method_details": {
          "type": "object"
        }
      }
    },
    "confidence_scores": {
      "type": "object",
      "properties": {
        "pattern": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        },
        "ml": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        },
        "overall": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        }
      }
    },
    "quality_metrics": {
      "type": "object",
      "properties": {
        "completeness": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        },
        "consistency": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        },
        "accuracy": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        },
        "usability": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        }
      }
    },
    "processing_method": {
      "type": "string",
      "enum": [
        "pattern_primary",
        "pattern_secondary",
        "ml_primary",
        "ml_secondary",
        "hybrid",
        "fallback"
      ]
    },
    "validation_status": {
      "type": "string",
      "enum": [
        "passed",
        "warning",
        "failed",
        "not_validated"
      ]
    }
  },
  "required": [
    "normalized_address",
    "confidence_scores",
    "quality_metrics"
  ]
}
